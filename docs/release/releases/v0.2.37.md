# Changelog

## [v0.2.37] - 2026-02-22

### Added

- Added Romm session test actions for both credential modes on the Romm settings flows:
  - `Test Viewer Session` (Launcharr `user` / `co-admin` viewer credentials)
  - `Test Admin Session` (Launcharr `admin` using the main Romm Username/Password)
- Added container-friendly HTTP access logging (Dozzle-friendly) with optional filtering for static asset noise.
- Added log redaction options for easier log sharing/troubleshooting:
  - host redaction
  - IP redaction
  - broader URL/host/ip console string redaction
- Added optional stderr-to-stdout log mirroring for environments that prefer a single log stream.

### Changed

- Unified app settings form rendering between `App > [App] > Settings` and `Settings > Apps` using shared UI partials so fields/labels/buttons stay aligned.
- Updated `Settings > Apps > Romm` to match the dedicated Romm settings page layout and controls (including admin/viewer session test buttons and matching notes).
- Expanded Romm launch bootstrap/session priming handling for role-based launches and cross-device/browser diagnostics (while keeping normal app launches unchanged).

### Fixed

- Fixed Sidebar Manager built-in/default app removal where some apps appeared to remove successfully but reappeared after reload.
  - Root cause: explicit `removed: true` overrides could be dropped during config override serialization when the default catalog app also had `removed: true` (for example hidden-by-default apps like `emby`).
- Fixed Sidebar Manager built-in delete action reliability by using a more robust submission path in the settings UI.
- Fixed duplicate confirmation prompt behavior in built-in app removal flow.

### Security

- None.

### Deprecated

- None.

### Removed

- Removed temporary debug instrumentation used during Sidebar Manager default-app delete diagnosis.

### Migration Notes

- No schema/data migration required.
- Browser hard refresh is recommended after upgrade so updated settings UI scripts/styles are loaded.
- Optional logging env vars (all default-safe/off except access logs):
  - `HTTP_ACCESS_LOGS`
  - `HTTP_ACCESS_LOGS_SKIP_STATIC`
  - `LOG_REDACT_HOSTS`
  - `LOG_REDACT_IPS`
  - `LOG_MIRROR_STDERR_TO_STDOUT`

### Verification Checklist

- [ ] `Settings -> Custom -> Sidebar`: deleting a built-in/default app (including hidden-by-default apps like `Emby`) removes it and it stays removed after reload.
- [ ] `Settings -> Custom -> Sidebar`: custom app delete still works.
- [ ] `App > Romm > Settings` and `Settings -> Apps -> Romm` show matching fields, notes, and `Test Viewer Session` / `Test Admin Session` buttons.
- [ ] Romm admin launch and viewer/co-admin launch still authenticate correctly in your normal browser flow.
- [ ] Access logs appear in container output (Dozzle) when `HTTP_ACCESS_LOGS=true`.
- [ ] Host/IP redaction works as expected when `LOG_REDACT_HOSTS=true` and/or `LOG_REDACT_IPS=true`.
