# Changelog

## [v0.2.25] - 2026-02-19

### Added

- Added local account avatar upload in `User Profile` with live preview.
- Added avatar validation and storage constraints for local uploads:
  - Allowed formats: `PNG`, `JPG`, `WEBP`
  - Maximum file size: `2 MB`
  - Client and server-side image/type checks
- Added user-avatar fallback behavior in user pills:
  - Setup owner admin fallback: `/icons/role.svg`
  - Other local/system users fallback: `/icons/user-profile.svg`
  - Plex users still use Plex avatars when available
- Added local Launcharr user deletion in `Settings -> User` with confirmation.

### Changed

- Updated `Settings -> User` local user table layout and controls for better small-screen handling.
- Updated profile role display to a header-aligned role pill in the profile card.

### Fixed

- Fixed mobile clipping/cropping regressions in `Settings -> User` after adding local-user delete controls.

### Security

- Owner admin account deletion is now blocked in UI and server route checks.
- Local-user delete route now rejects current-session account deletion.

### Deprecated

- None.

### Removed

- None.

### Migration Notes

- No schema migration required.
- Existing local accounts are backward compatible; avatar/owner metadata is normalized at runtime.
- Restart Launcharr after upgrade to apply server/template/style updates.

### Verification Checklist

- [ ] Setup owner admin account shows `/icons/role.svg` fallback when no avatar exists
- [ ] Non-owner local accounts show `/icons/user-profile.svg` fallback when no avatar exists
- [ ] Plex users still show Plex-provided avatars when available
- [ ] Local user can upload avatar (`PNG/JPG/WEBP`, max `2 MB`) and preview/save successfully
- [ ] Invalid avatar uploads (type/size/content) are rejected with clear errors
- [ ] Local user delete action shows confirmation prompt
- [ ] Owner admin account delete is blocked
- [ ] Current-session local account delete is blocked
- [ ] `Settings -> User` local users table is usable on mobile without page clipping

